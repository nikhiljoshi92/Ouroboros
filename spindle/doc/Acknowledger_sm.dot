digraph Acknowledger {

    node
        [shape=Mrecord width=1.5];

    subgraph cluster_AcknowledgerFSM {

        label="AcknowledgerFSM";

        //
        // States (Nodes)
        //

        "AcknowledgerFSM::Waiting"
            [label="{Waiting}"];

        "AcknowledgerFSM::WriteBatch"
            [label="{WriteBatch}"];

        "AcknowledgerFSM::Closed"
            [label="{Closed}"];

        "%start"
            [label="" shape=circle style=filled fillcolor=black width=0.25];

        //
        // Transitions (Edges)
        //

        "AcknowledgerFSM::Waiting" -> "AcknowledgerFSM::WriteBatch"
            [label="ack/\l"];

        "AcknowledgerFSM::Waiting" -> "AcknowledgerFSM::Closed"
            [label="close/\l"];

        "AcknowledgerFSM::WriteBatch" -> "AcknowledgerFSM::Closed"
            [label="writeReady/\l"];

        "AcknowledgerFSM::WriteBatch" -> "AcknowledgerFSM::WriteBatch"
            [label="writeReady/\l"];

        "AcknowledgerFSM::WriteBatch" -> "AcknowledgerFSM::Waiting"
            [label="writeReady/\l"];

        "AcknowledgerFSM::WriteBatch" -> "AcknowledgerFSM::Waiting"
            [label="waiting/\l"];

        "AcknowledgerFSM::WriteBatch" -> "AcknowledgerFSM::Closed"
            [label="close/\l"];

        "AcknowledgerFSM::Closed" -> "AcknowledgerFSM::Closed"
            [label="close/\l"];

        "%start" -> "AcknowledgerFSM::Waiting"
    }

}
