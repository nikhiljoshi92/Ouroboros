digraph Shuttle {

    node
        [shape=Mrecord width=1.5];

    subgraph cluster_ShuttleFSM {

        label="ShuttleFSM";

        //
        // States (Nodes)
        //

        "ShuttleFSM::Suspended"
            [label="{Suspended}"];

        "ShuttleFSM::Established"
            [label="{Established}"];

        "ShuttleFSM::Handshake"
            [label="{Handshake}"];

        "ShuttleFSM::ReadWeft"
            [label="{ReadWeft}"];

        "ShuttleFSM::WriteSpan"
            [label="{WriteSpan}"];

        "ShuttleFSM::Closed"
            [label="{Closed}"];

        "%start"
            [label="" shape=circle style=filled fillcolor=black width=0.25];

        //
        // Transitions (Edges)
        //

        "ShuttleFSM::Suspended" -> "ShuttleFSM::Handshake"
            [label="accept/\l"];

        "ShuttleFSM::Suspended" -> "ShuttleFSM::Closed"
            [label="close/\l"];

        "ShuttleFSM::Established" -> "ShuttleFSM::ReadWeft"
            [label="readReady/\l"];

        "ShuttleFSM::Established" -> "ShuttleFSM::Closed"
            [label="close/\l"];

        "ShuttleFSM::Handshake" -> "ShuttleFSM::Closed"
            [label="readReady/\l"];

        "ShuttleFSM::Handshake" -> "ShuttleFSM::Established"
            [label="readReady/\l"];

        "ShuttleFSM::Handshake" -> "ShuttleFSM::Established"
            [label="established/\l"];

        "ShuttleFSM::Handshake" -> "ShuttleFSM::Closed"
            [label="close/\l"];

        "ShuttleFSM::ReadWeft" -> "ShuttleFSM::Closed"
            [label="readReady/\l"];

        "ShuttleFSM::ReadWeft" -> "ShuttleFSM::WriteSpan"
            [label="readReady/\l"];

        "ShuttleFSM::ReadWeft" -> "ShuttleFSM::WriteSpan"
            [label="writeSpan/\l"];

        "ShuttleFSM::ReadWeft" -> "ShuttleFSM::Closed"
            [label="close/\l"];

        "ShuttleFSM::WriteSpan" -> "ShuttleFSM::Closed"
            [label="writeReady/\l"];

        "ShuttleFSM::WriteSpan" -> "ShuttleFSM::Established"
            [label="writeReady/\l"];

        "ShuttleFSM::WriteSpan" -> "ShuttleFSM::Established"
            [label="unknownSubscription/\l"];

        "ShuttleFSM::WriteSpan" -> "ShuttleFSM::Established"
            [label="packetDelivered/\l"];

        "ShuttleFSM::WriteSpan" -> "ShuttleFSM::Closed"
            [label="close/\l"];

        "%start" -> "ShuttleFSM::Suspended"
    }

}
